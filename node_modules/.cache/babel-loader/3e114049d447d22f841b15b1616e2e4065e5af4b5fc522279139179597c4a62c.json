{"ast":null,"code":"import _slicedToArray from\"/Users/nimasakha/feedback-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{computeHeadingLevel}from\"@testing-library/react\";import{useState,useContext,useEffect}from\"react\";import Card from\"./shared/Card\";import Button from\"./shared/Button\";import RatingSelect from\"./RatingSelect\";import FeedbackContext from\"../context/FeedbackContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function FeedbackForm(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(10),_useState4=_slicedToArray(_useState3,2),rating=_useState4[0],setRating=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),btnDisabled=_useState6[0],setBtnDisabled=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var _useContext=useContext(FeedbackContext),addFeedback=_useContext.addFeedback,feedbackEdit=_useContext.feedbackEdit,updateFeedback=_useContext.updateFeedback;useEffect(function(){if(feedbackEdit.edit===true){setBtnDisabled(false);setText(feedbackEdit.item.text);setRating(feedbackEdit.item.rating);}},[feedbackEdit]);var handleTextChange=function handleTextChange(e){setText(e.target.value);if(text===\"\"){setBtnDisabled(true);setMessage(null);}else if(text!==\"\"&&text.trim().length<=10){setMessage(\"Text must be at least 10 charecters\");setBtnDisabled(true);}else{setMessage(null);setBtnDisabled(false);}};var handleSubmit=function handleSubmit(e){e.preventDefault();if(text.trim().length>10){var newFeedback={text:text,rating:rating};if(feedbackEdit.edit===true){updateFeedback(feedbackEdit.item.id,newFeedback);}else{addFeedback(newFeedback);}setText(\"\");}};return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"How would you rate your service with us?\"}),/*#__PURE__*/_jsx(RatingSelect,{select:function select(rating){return setRating(rating);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:handleTextChange,type:\"text\",placeholder:\"Write a review\",value:text}),/*#__PURE__*/_jsx(Button,{isDisabled:btnDisabled,type:\"submit\",children:\"Send\"})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:message})]})});}export default FeedbackForm;","map":{"version":3,"names":["computeHeadingLevel","useState","useContext","useEffect","Card","Button","RatingSelect","FeedbackContext","FeedbackForm","text","setText","rating","setRating","btnDisabled","setBtnDisabled","message","setMessage","addFeedback","feedbackEdit","updateFeedback","edit","item","handleTextChange","e","target","value","trim","length","handleSubmit","preventDefault","newFeedback","id"],"sources":["/Users/nimasakha/feedback-app/src/components/FeedbackForm.jsx"],"sourcesContent":["import { computeHeadingLevel } from \"@testing-library/react\"\nimport { useState, useContext, useEffect } from \"react\"\nimport Card from \"./shared/Card\"\nimport Button from \"./shared/Button\"\nimport RatingSelect from \"./RatingSelect\"\nimport FeedbackContext from \"../context/FeedbackContext\"\nfunction FeedbackForm() {\n  const [text, setText] = useState(\"\")\n  const [rating, setRating] = useState(10)\n  const [btnDisabled, setBtnDisabled] = useState(true)\n  const [message, setMessage] = useState(\"\")\n  const { addFeedback, feedbackEdit, updateFeedback } =\n    useContext(FeedbackContext)\n\n  useEffect(() => {\n    if (feedbackEdit.edit === true) {\n      setBtnDisabled(false)\n      setText(feedbackEdit.item.text)\n      setRating(feedbackEdit.item.rating)\n    }\n  }, [feedbackEdit])\n\n  const handleTextChange = (e) => {\n    setText(e.target.value)\n    if (text === \"\") {\n      setBtnDisabled(true)\n      setMessage(null)\n    } else if (text !== \"\" && text.trim().length <= 10) {\n      setMessage(\"Text must be at least 10 charecters\")\n      setBtnDisabled(true)\n    } else {\n      setMessage(null)\n      setBtnDisabled(false)\n    }\n  }\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    if (text.trim().length > 10) {\n      const newFeedback = {\n        text,\n        rating,\n      }\n      if (feedbackEdit.edit === true) {\n        updateFeedback(feedbackEdit.item.id, newFeedback)\n      } else {\n        addFeedback(newFeedback)\n      }\n\n      setText(\"\")\n    }\n  }\n\n  return (\n    <Card>\n      <form onSubmit={handleSubmit}>\n        <h2>How would you rate your service with us?</h2>\n        <RatingSelect select={(rating) => setRating(rating)} />\n        <div className='input-group'>\n          <input\n            onChange={handleTextChange}\n            type='text'\n            placeholder='Write a review'\n            value={text}\n          />\n          <Button isDisabled={btnDisabled} type='submit'>\n            Send\n          </Button>\n        </div>\n        {message && <div className='message'>{message}</div>}\n      </form>\n    </Card>\n  )\n}\n\nexport default FeedbackForm\n"],"mappings":"mHAAA,OAASA,mBAAmB,KAAQ,wBAAwB,CAC5D,OAASC,QAAQ,CAAEC,UAAU,CAAEC,SAAS,KAAQ,OAAO,CACvD,MAAOC,KAAI,KAAM,eAAe,CAChC,MAAOC,OAAM,KAAM,iBAAiB,CACpC,MAAOC,aAAY,KAAM,gBAAgB,CACzC,MAAOC,gBAAe,KAAM,4BAA4B,yFACxD,QAASC,aAAY,EAAG,CACtB,cAAwBP,QAAQ,CAAC,EAAE,CAAC,wCAA7BQ,IAAI,eAAEC,OAAO,eACpB,eAA4BT,QAAQ,CAAC,EAAE,CAAC,yCAAjCU,MAAM,eAAEC,SAAS,eACxB,eAAsCX,QAAQ,CAAC,IAAI,CAAC,yCAA7CY,WAAW,eAAEC,cAAc,eAClC,eAA8Bb,QAAQ,CAAC,EAAE,CAAC,yCAAnCc,OAAO,eAAEC,UAAU,eAC1B,gBACEd,UAAU,CAACK,eAAe,CAAC,CADrBU,WAAW,aAAXA,WAAW,CAAEC,YAAY,aAAZA,YAAY,CAAEC,cAAc,aAAdA,cAAc,CAGjDhB,SAAS,CAAC,UAAM,CACd,GAAIe,YAAY,CAACE,IAAI,GAAK,IAAI,CAAE,CAC9BN,cAAc,CAAC,KAAK,CAAC,CACrBJ,OAAO,CAACQ,YAAY,CAACG,IAAI,CAACZ,IAAI,CAAC,CAC/BG,SAAS,CAACM,YAAY,CAACG,IAAI,CAACV,MAAM,CAAC,CACrC,CACF,CAAC,CAAE,CAACO,YAAY,CAAC,CAAC,CAElB,GAAMI,iBAAgB,CAAG,QAAnBA,iBAAgB,CAAIC,CAAC,CAAK,CAC9Bb,OAAO,CAACa,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CACvB,GAAIhB,IAAI,GAAK,EAAE,CAAE,CACfK,cAAc,CAAC,IAAI,CAAC,CACpBE,UAAU,CAAC,IAAI,CAAC,CAClB,CAAC,IAAM,IAAIP,IAAI,GAAK,EAAE,EAAIA,IAAI,CAACiB,IAAI,EAAE,CAACC,MAAM,EAAI,EAAE,CAAE,CAClDX,UAAU,CAAC,qCAAqC,CAAC,CACjDF,cAAc,CAAC,IAAI,CAAC,CACtB,CAAC,IAAM,CACLE,UAAU,CAAC,IAAI,CAAC,CAChBF,cAAc,CAAC,KAAK,CAAC,CACvB,CACF,CAAC,CAED,GAAMc,aAAY,CAAG,QAAfA,aAAY,CAAIL,CAAC,CAAK,CAC1BA,CAAC,CAACM,cAAc,EAAE,CAClB,GAAIpB,IAAI,CAACiB,IAAI,EAAE,CAACC,MAAM,CAAG,EAAE,CAAE,CAC3B,GAAMG,YAAW,CAAG,CAClBrB,IAAI,CAAJA,IAAI,CACJE,MAAM,CAANA,MACF,CAAC,CACD,GAAIO,YAAY,CAACE,IAAI,GAAK,IAAI,CAAE,CAC9BD,cAAc,CAACD,YAAY,CAACG,IAAI,CAACU,EAAE,CAAED,WAAW,CAAC,CACnD,CAAC,IAAM,CACLb,WAAW,CAACa,WAAW,CAAC,CAC1B,CAEApB,OAAO,CAAC,EAAE,CAAC,CACb,CACF,CAAC,CAED,mBACE,KAAC,IAAI,wBACH,cAAM,QAAQ,CAAEkB,YAAa,wBAC3B,oBAAI,0CAAwC,EAAK,cACjD,KAAC,YAAY,EAAC,MAAM,CAAE,gBAACjB,MAAM,QAAKC,UAAS,CAACD,MAAM,CAAC,EAAC,EAAG,cACvD,aAAK,SAAS,CAAC,aAAa,wBAC1B,cACE,QAAQ,CAAEW,gBAAiB,CAC3B,IAAI,CAAC,MAAM,CACX,WAAW,CAAC,gBAAgB,CAC5B,KAAK,CAAEb,IAAK,EACZ,cACF,KAAC,MAAM,EAAC,UAAU,CAAEI,WAAY,CAAC,IAAI,CAAC,QAAQ,UAAC,MAE/C,EAAS,GACL,CACLE,OAAO,eAAI,YAAK,SAAS,CAAC,SAAS,UAAEA,OAAO,EAAO,GAC/C,EACF,CAEX,CAEA,cAAeP,aAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}